<!DOCTYPE html>
<html lang="en">

<head>

  <!-- 
    This is the Handlebars template for the Admin page 
    - The page displays the current list of logs returned by server.js
    - The user can clear the log by first setting up an admin key
  -->

  <meta charset="utf-8" />
  <link rel="icon" href="https://glitch.com/favicon.ico" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />

  <title>admin</title>

  <!-- Import the webpage's stylesheet -->
  <link rel="stylesheet" href="/style.css" />

</head>

<body>
  <div class="wrapper">
    <div class="content" role="main">

      <!-- This is the start of content for our page -->
      <h1>hello,
      {{loggedin}}
      </h1>
      {{#if error}}
      <p class="error">
        {{error}}
      </p>
      {{else}}
    <br>
      <!-- The server script returns the logs in an array -->
        <form method="post" action="/create">
          <!-- The server script returns the list of language options to offer in the poll -->
          
          <input type = "hidden" name="username" value={{loggedin}}></input>
          <button type="submit">
            create schedule
          </button>
        </form>
     
      <p>
    click the id to view/edit</p>

      <table>
        <tr>
          <th>id</th>
          <th>title</th>
          <th>location</th>
          <th>timezone</th>
          <th>start time</th>
          <th>end time</th>
        </tr>
        {{#each dbQueryResult}}
          <tr>
            <td><form method="post" action="/viewandedit"><button type="submit">
              {{id}}
              </button>
              <input type = "hidden" name="schedId" id="schedId" value={{id}}></input></form></td>
            <td>{{title}}</td>
            <td>{{location}}</td>
            <td>{{timezone}}</td>
            <td>{{start_time}}</td>
            <td>{{end_time}}</td>
          </tr>
        {{/each}}
      </table>



      <!-- Write out a table row for each entry in the log array showing choice and timestamp -->


      <!-- The user can clear the logs if they first set up an admin key in the env -->

      {{/if}}
    </div>
  </div>
  <!-- The footer holds our remix button — you can use it for structure or cut it out ✂ -->
  <footer class="footer">
    <div class="links"></div>
    <a href="/">log out</a>
    <span class="divider">|</span>

  </footer>
</body>

</html>
